# Repository Guidelines

## Project Structure & Module Organization
- `R/`: Source functions (roxygen2-documented). API entrypoints often end with `4R` (e.g., `chat4R`, `gemini4R`).
- `tests/testthat/`: Unit tests using testthat; main runner in `tests/testthat.R`.
- `man/` and `NAMESPACE`: Generated by roxygen2; do not edit by hand.
- `inst/`: Assets and extras (`chatGPT_prompts/`, `sh/`, `vignettes/`, figures, flowcharts).
- `DESCRIPTION`, `README.md`: Package metadata and overview.

## Build, Test, and Development Commands
- Document: `R -q -e "devtools::document()"` (updates `man/` and `NAMESPACE`).
- Build: `R CMD build .` or `R -q -e "devtools::build()"`.
- Check: `R CMD check chatAI4R_*.tar.gz` or `R -q -e "devtools::check()"`.
- Test: `R -q -e "devtools::test()"` (CI runs R CMD check on push/PR).
- Install: `R CMD INSTALL chatAI4R_*.tar.gz` or `R -q -e "devtools::install()"`.

## Coding Style & Naming Conventions
- Indentation: 2 spaces, no tabs; keep lines reasonably short.
- Roxygen2: Include `@title`, `@description`, `@param`, `@return`, `@importFrom`, `@export`, and minimal runnable `@examples`.
- Naming: Use verb-first, descriptive names. Follow existing patterns:
  - API wrappers: lowerCamelCase with `4R` suffix (e.g., `chat4R`).
  - Utilities/workflows: camel/PascalCase (e.g., `removeQuotations`, `TextSummary`).
- Imports: Prefer `@importFrom pkg fn` and explicit `pkg::fn` in code.

## Testing Guidelines
- Framework: testthat. Place tests in `tests/testthat/test_<topic>.R`.
- Keep tests deterministic and fast. Avoid external API calls by default.
- For optional API tests, skip when keys are missing:
  `testthat::skip_if_not(nzchar(Sys.getenv("OPENAI_API_KEY")))`.
- Run locally: `R -q -e "devtools::test()"` and ensure `devtools::check()` passes.

## Commit & Pull Request Guidelines
- Commits: Imperative mood, concise subject, include scope (e.g., `R/chat4R: validate HTTP status`).
- PRs: Describe changes, link issues, note breaking changes, and include before/after behavior when applicable.
- Requirements: Pass `R CMD check` locally, update docs (`devtools::document()`), add/adjust tests, and update `README.md` if user-facing behavior changes.
- CI: GitHub Actions runs R CMD check on Linux/macOS/Windows for `main`, `master`, and `dev` branches.

## Security & Configuration
- Never commit API keys; use environment variables (e.g., `OPENAI_API_KEY`).
- Avoid printing secrets in logs or errors; prefer structured error messages.
- Add non-package artifacts to `.Rbuildignore` when needed.
